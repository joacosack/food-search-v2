<!doctype html>
<html lang="es">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Buscador Delivery Inteligente</title>
    <link rel="stylesheet" href="styles.css" />
  </head>
  <body>
    <div class="container">
      <h1>Buscador Delivery Inteligente</h1>
      <p class="subtitle">Descubrí qué pedir con ayuda de IA. Ejemplo: "pizza vegana con envío gratis y rápida" <span class="subtitle-version">· Versión <span id="app-version" class="version-badge" aria-live="polite"></span></span></p>
      <div class="prompt-bar">
        <label for="prompt-samples">Probar con:</label>
        <select id="prompt-samples" aria-label="Prompts de ejemplo">
          <option value="">Elegí un ejemplo...</option>
        </select>
        <button id="use-sample" type="button">Cargar</button>
      </div>
      <div class="row">
        <input id="q" type="text" placeholder="Escribí lo que querés comer..." />
        <button id="btn">Buscar</button>
      </div>
      <div class="action-row">
        <button id="show-all" type="button" class="secondary">Ver todo el catálogo</button>
      </div>
      <div id="llm-box" class="llm-box" aria-live="polite" hidden>
        <div class="llm-box__header">
          <span class="llm-box__badge">IA</span>
          <h2>Asistente de delivery</h2>
        </div>
        <p id="advisor-status" class="llm-status"></p>
        <h3 id="advisor-headline"></h3>
        <p id="advisor-details"></p>
        <ul id="advisor-notes"></ul>
      </div>
      <div id="status-banner" class="status" aria-live="polite"></div>
      <details class="panel" id="debug-panel">
        <summary>Debug: Respuesta de la IA y consulta estructurada</summary>
        <div class="debug-content">
          <section id="llm-debug" hidden>
            <h4>Respuesta detallada de la IA</h4>
            <p id="llm-debug-status" class="llm-debug-status"></p>
            <h5>Payload crudo</h5>
            <pre id="llm-debug-raw"></pre>
            <h5>Filtros sugeridos por la IA</h5>
            <pre id="llm-debug-filters"></pre>
            <h5>Overrides de ranking sugeridos</h5>
            <pre id="llm-debug-overrides"></pre>
            <h5>Consulta final enviada al backend</h5>
            <pre id="llm-debug-final"></pre>
          </section>
          <section>
            <h4>Consulta estructurada</h4>
            <pre id="structured"></pre>
            <h4>Plan de búsqueda</h4>
            <pre id="plan"></pre>
          </section>
        </div>
      </details>
      <h2>Platos sugeridos</h2>
      <div id="results"></div>
    </div>
    <script>
      window.ENABLE_BACKEND = true;
      window.BACKEND_URL = "https://food-search-backend.onrender.com";
    </script>
    <script type="module" src="app.js"></script>
  </body>
</html>
